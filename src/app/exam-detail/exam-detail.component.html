<app-sidebar></app-sidebar>

<div
  class="page-wrapper"
  id="main-wrapper"
  data-layout="vertical"
  data-navbarbg="skin6"
  data-sidebartype="full"
  data-sidebar-position="fixed"
  data-header-position="fixed"
>
  <div class="body-wrapper">
    <app-header-admin></app-header-admin>

    <div class="container-fluid">
      <app-navbar></app-navbar>
      <div class="container my-5">

        <div class="row">
          <div class="col-lg-12 mx-auto">
            <!-- Page Title -->
            <h2 class="text-center mb-4">Exam Responses</h2>

            <!-- Loop through examResponses -->
            <div
              *ngFor="let response of examResponses"
              class="card my-4 shadow-sm"
            >
              <div >
               <strong> Student Name : {{ response.studentUsername }}</strong>
              </div>
              <div class="card-body">
                <p><strong>Total Score:</strong> {{ response.total_score }}</p>

                <strong class="text-secondary mt-4">Evaluations</strong>

                <!-- Evaluations Loop -->
                <div
                  *ngFor="let evaluation of response.evaluations"
                  class="evaluation-container border rounded p-3 mb-3"
                  style="background-color: #f9f9f9;"
                >
                  <p><strong>Question:</strong> {{ evaluation.question_text }}</p>
                  <p><strong>Student Answer:</strong> {{ evaluation.user_response }}</p>
                  <p><strong>Correct Answer:</strong> {{ evaluation.correct_response }}</p>
                  <p>
                    <strong>Score:</strong> 
                    <span [ngClass]="{'text-success': evaluation.score_ratio > 0, 'text-danger': evaluation.score_ratio === 0}">
                      {{ evaluation.score_ratio }}
                    </span>
                  </p>
                </div>
              </div>
            </div>
          </div>
        </div>
        
      </div>
    </div>
  </div>
</div>
